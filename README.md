# Career Builder - AI-Powered Skill Tree Visualization

An interactive web application that generates and visualizes career skill trees using AI. Enter any career path and get a comprehensive skill tree showing the progression from beginner to advanced skills.

## Features

- **AI-Generated Skill Trees**: Enter any career (e.g., "Software Engineer", "Data Scientist") and get a complete skill tree generated by GPT-4o
- **Interactive Visualization**: Explore skill trees with pan, zoom, and click interactions using React Flow
- **Game-Like UI**: Skills displayed with levels, progress bars, and category badges
- **User-Owned Maps**: Logged-in users automatically get personalized copies of skill trees with custom titles and progress tracking
- **Auto-Save**: All changes to your maps are automatically saved
- **Sharing**: Make maps public with short shareable URLs - others can view and copy your maps
- **Multi-Language Support**: Full internationalization with English, Chinese (简体中文), and Japanese (日本語)
- **Smart Caching**: Redis caching prevents redundant API calls and speeds up repeat queries
- **Persistent Storage**: Generated skill trees are saved to PostgreSQL for future access

## Tech Stack

- **Framework**: Next.js 15 (App Router) with Turbopack
- **Database**: Neon (Serverless PostgreSQL) with Drizzle ORM
- **Caching**: Upstash Redis (HTTP-based)
- **AI**: OpenAI API (GPT-4o)
- **Visualization**: React Flow (@xyflow/react)
- **Styling**: Tailwind CSS v4
- **i18n**: next-intl (locale-prefixed URLs)
- **Validation**: Zod
- **Package Manager**: pnpm

## Getting Started

### Prerequisites

- Node.js 18+
- pnpm
- Neon PostgreSQL database
- Upstash Redis instance
- OpenAI API key

### Installation

1. Clone the repository:
   ```bash
   git clone <repository-url>
   cd ai-skill-tree-website
   ```

2. Install dependencies:
   ```bash
   pnpm install
   ```

3. Set up environment variables:
   ```bash
   cp .env.example .env.local
   ```

4. Fill in your credentials in `.env.local`:
   ```env
   # Neon PostgreSQL
   DATABASE_URL="postgresql://user:password@host/database?sslmode=require"

   # Upstash Redis
   UPSTASH_REDIS_REST_URL="https://your-redis.upstash.io"
   UPSTASH_REDIS_REST_TOKEN="your-token"

   # OpenAI
   OPENAI_API_KEY="sk-..."
   ```

5. Push the database schema:
   ```bash
   pnpm drizzle-kit push
   ```

6. Start the development server:
   ```bash
   pnpm dev
   ```

7. Open [http://localhost:3000](http://localhost:3000) in your browser.

## Project Structure

```
├── app/
│   ├── [locale]/           # Locale-prefixed pages (en, zh, ja)
│   │   ├── (marketing)/
│   │   │   ├── layout.tsx      # Marketing layout
│   │   │   └── page.tsx        # Landing page with search
│   │   ├── career/
│   │   │   └── [careerId]/
│   │   │       └── page.tsx    # Career detail with skill graph
│   │   ├── dashboard/
│   │   │   └── page.tsx        # User dashboard
│   │   └── layout.tsx          # Locale layout with providers
│   ├── api/
│   │   ├── ai/
│   │   │   └── generate/
│   │   │       └── route.ts    # AI skill tree generation
│   │   ├── career/
│   │   │   ├── search/
│   │   │   │   └── route.ts    # Career search API
│   │   │   └── [careerId]/
│   │   │       └── route.ts    # Get career by ID
│   │   └── map/
│   │       ├── fork/
│   │       │   └── route.ts    # Fork career to user map
│   │       └── [mapId]/
│   │           ├── route.ts    # Get/update/delete user map
│   │           └── copy/
│   │               └── route.ts # Copy public map
│   ├── globals.css         # Tailwind CSS with custom theme
│   └── layout.tsx          # Root layout
├── i18n/                   # Internationalization config
│   ├── routing.ts          # Locale routing config
│   ├── request.ts          # Server request config
│   └── navigation.ts       # Locale-aware navigation
├── messages/               # Translation files
│   ├── en.json             # English
│   ├── zh.json             # Chinese
│   └── ja.json             # Japanese
├── middleware.ts           # Locale detection middleware
├── components/
│   ├── skill-graph/
│   │   ├── SkillNode.tsx       # Custom skill node component
│   │   ├── SkillEdge.tsx       # Custom animated edge
│   │   ├── SkillGraph.tsx      # Main graph component
│   │   └── use-skill-layout.ts # Dagre layout utility
│   └── ui/
│       ├── GlassPanel.tsx      # Glassmorphism container
│       ├── XPProgressRing.tsx  # Circular progress indicator
│       ├── SearchInput.tsx     # Search input component
│       └── LanguageSwitcher.tsx # Language dropdown selector
├── lib/
│   ├── db/
│   │   ├── index.ts        # Database connection
│   │   └── schema.ts       # Drizzle ORM schema
│   ├── ai.ts               # OpenAI integration
│   ├── cache.ts            # Upstash Redis cache
│   ├── constants.ts        # App constants (thresholds, limits, timing)
│   ├── normalize-career.ts # Career key & ID utilities
│   └── schemas.ts          # Zod validation schemas
├── drizzle.config.ts       # Drizzle configuration
└── package.json
```

## API Routes

### POST `/api/ai/generate`
Generate a new skill tree for a career.

**Request Body:**
```json
{
  "career": "Software Engineer",
  "locale": "en"  // Optional: "en", "zh", or "ja"
}
```

**Response:**
```json
{
  "success": true,
  "data": {
    "career": { "id": "...", "title": "Software Engineer", ... },
    "skillGraph": { "nodes": [...], "edges": [...] }
  }
}
```

### GET `/api/career/[careerId]?locale=en`
Fetch an existing career by its canonical key. Pass `locale` query parameter to get localized version.

### GET `/api/career/search?q=engineer`
Search for careers matching a query.

### User Maps API

#### GET `/api/map/[mapId]`
Fetch a user map by UUID or share slug. Returns map data, career info, and skill graph.

#### PATCH `/api/map/[mapId]`
Update map settings (requires authentication and ownership).

**Request Body:**
```json
{
  "title": "My Custom Map",
  "isPublic": true,
  "nodeData": [{ "skillId": "...", "progress": 50 }]
}
```

#### DELETE `/api/map/[mapId]`
Delete a user's map (requires authentication and ownership).

#### POST `/api/map/fork`
Create a new user map from a base career or another user's public map.

**Request Body:**
```json
{
  "careerId": "uuid",  // OR
  "mapId": "uuid",
  "title": "Optional custom title"
}
```

#### POST `/api/map/[mapId]/copy`
Copy another user's public map to your account.

## Skill Node Structure

Each skill node contains:
- `id`: Unique identifier
- `name`: Skill name
- `description`: What the skill involves
- `icon`: Emoji representation
- `level`: 1-10 difficulty/progression level
- `category`: Grouping (e.g., "Frontend", "Backend")
- `progress`: 0-100 completion percentage
- `prerequisites`: Array of prerequisite skill IDs

## Customization

### Tailwind Theme

Custom colors are defined in `app/globals.css`:
- `--color-neon-cyan`: Primary accent color
- `--color-neon-purple`: Secondary accent
- `--color-neon-pink`: Tertiary accent

### Layout Configuration

Adjust the Dagre layout in `components/skill-graph/use-skill-layout.ts`:
- `nodesep`: Horizontal spacing between nodes
- `ranksep`: Vertical spacing between levels
- `rankdir`: Layout direction ('TB' = top-bottom, 'LR' = left-right)

## Deployment

This app is optimized for Vercel deployment:

1. Push to GitHub
2. Connect to Vercel
3. Add environment variables in Vercel dashboard
4. Deploy

## License

MIT
