# Personal Skill Map - AI-Powered Skill Map Visualization

An interactive web application that generates and visualizes career skill maps using AI. Enter any career path and get a comprehensive skill map showing the progression from beginner to advanced skills.

## Features

- **Smart Search**: Enter a specific career or describe your preferences (e.g., "I want to work remotely") - AI analyzes your query and suggests matching careers
- **AI-Generated Skill Maps**: Enter any career (e.g., "Software Engineer", "Data Scientist") and get a complete skill map generated by GPT-4o
- **Interactive Visualization**: Explore skill maps with pan, zoom, and click interactions using React Flow
- **Dynamic Background**: Animated network background with mouse-reactive nodes
- **Game-Like UI**: Skills displayed with levels, progress bars, and category badges
- **User-Owned Maps**: Logged-in users automatically get personalized copies of skill maps with custom titles and progress tracking
- **Auto-Save**: All changes to your maps are automatically saved
- **Sharing**: Make maps public with short shareable URLs - others can view and copy your maps
- **Multi-Language Support**: Full internationalization with English, Chinese, and Japanese
- **SEO Optimized**: Dynamic sitemap, robots.txt, hreflang tags, Open Graph/Twitter cards, JSON-LD structured data
- **Smart Caching**: Redis caching prevents redundant API calls and speeds up repeat queries
- **Persistent Storage**: Generated skill maps are saved to PostgreSQL for future access

## Tech Stack

- **Framework**: Next.js 15 (App Router) with Turbopack
- **Database**: Neon (Serverless PostgreSQL) with Drizzle ORM
- **Caching**: Upstash Redis (HTTP-based)
- **AI**: OpenAI API (GPT-4o)
- **Visualization**: React Flow (@xyflow/react)
- **Styling**: Tailwind CSS v4
- **Animation**: Framer Motion
- **i18n**: next-intl (locale-prefixed URLs)
- **Validation**: Zod
- **Package Manager**: pnpm

## Getting Started

### Prerequisites

- Node.js 18+
- pnpm
- Neon PostgreSQL database
- Upstash Redis instance
- OpenAI API key

### Installation

1. Clone the repository:
   ```bash
   git clone <repository-url>
   cd ai-skill-tree-website
   ```

2. Install dependencies:
   ```bash
   pnpm install
   ```

3. Set up environment variables:
   ```bash
   cp .env.example .env.local
   ```

4. Fill in your credentials in `.env.local`:
   ```env
   # Neon PostgreSQL
   DATABASE_URL="postgresql://user:password@host/database?sslmode=require"

   # Upstash Redis
   UPSTASH_REDIS_REST_URL="https://your-redis.upstash.io"
   UPSTASH_REDIS_REST_TOKEN="your-token"

   # OpenAI
   OPENAI_API_KEY="sk-..."

   # NextAuth
   NEXTAUTH_URL="http://localhost:3000"
   NEXTAUTH_SECRET="your-secret"

   # Google OAuth
   GOOGLE_CLIENT_ID="..."
   GOOGLE_CLIENT_SECRET="..."

   # Twitter OAuth (optional)
   TWITTER_CLIENT_ID="..."
   TWITTER_CLIENT_SECRET="..."

   # WeChat OAuth (optional - login disabled if not set)
   WECHAT_APP_ID="..."
   WECHAT_APP_SECRET="..."
   ```

5. Push the database schema:
   ```bash
   pnpm drizzle-kit push
   ```

6. Start the development server:
   ```bash
   pnpm dev
   ```

7. Open [http://localhost:3000](http://localhost:3000) in your browser.

## Project Structure

```
├── app/
│   ├── [locale]/           # Locale-prefixed pages (en, zh, ja)
│   │   ├── (marketing)/
│   │   │   └── page.tsx        # Landing page with animated hero
│   │   ├── career/
│   │   │   └── [careerId]/
│   │   │       └── page.tsx    # Career detail with skill graph
│   │   ├── dashboard/
│   │   │   └── page.tsx        # User dashboard
│   │   └── layout.tsx          # Locale layout with providers
│   ├── api/
│   │   ├── ai/generate/        # AI skill map generation
│   │   ├── career/             # Career CRUD operations
│   │   └── map/                # User map operations
│   ├── globals.css             # Tailwind CSS with custom theme
│   ├── sitemap.ts              # Dynamic sitemap with all locales
│   ├── robots.ts               # Robots.txt configuration
│   ├── icon.png                # App icon (192x192)
│   ├── apple-icon.png          # Apple touch icon (180x180)
│   └── favicon.ico             # Browser favicon
├── components/
│   ├── layout/
│   │   ├── Header.tsx              # Site header with navigation
│   │   └── SkillTreeBackground.tsx # Animated network background
│   ├── skill-graph/
│   │   ├── SkillNode.tsx       # Custom skill node component
│   │   ├── SkillEdge.tsx       # Custom animated edge
│   │   └── SkillGraph.tsx      # Main graph component
│   ├── seo/
│   │   └── JsonLd.tsx          # JSON-LD structured data components
│   └── ui/
│       ├── GlassPanel.tsx      # Glassmorphism container
│       ├── Icons.tsx           # Reusable SVG icons (MenuIcon, CloseIcon)
│       ├── SearchInput.tsx     # Search input with customizable width
│       └── LanguageSwitcher.tsx # Language dropdown selector
├── i18n/                       # Internationalization config
├── messages/                   # Translation files (en, zh, ja)
├── lib/
│   ├── db/                     # Database connection & schema
│   ├── ai.ts                   # OpenAI integration
│   ├── cache.ts                # Redis cache utilities
│   ├── constants.ts            # Centralized app constants
│   └── schemas.ts              # Zod validation schemas
├── public/
│   ├── icon-transparent-bg.png      # App icon (standard)
│   └── large-icon-transparent-bg.png # Large icon for hero
└── package.json
```

## Key Components

### SkillTreeBackground

An animated SVG background with:
- Grid-based node distribution with organic variation
- Network connections between nearby nodes
- Mouse-reactive nodes (attraction and scale effects)
- Configurable via `BACKGROUND_CONFIG` in `lib/constants.ts`

### Header

Fixed navigation header with:
- App logo with white circular background
- Responsive navigation links (configured via `NAV_LINKS` constant)
- Mobile hamburger menu with animated slide-down panel
- Language switcher
- User authentication menu
- Scroll-aware styling (transparent to blur backdrop)

### SearchInput

Flexible search input component with:
- Customizable width via `className` prop
- Loading state with spinner
- Gradient submit button

## Configuration

All configurable values are centralized in `lib/constants.ts`:

```typescript
// Asset paths
ASSETS.ICON              // Standard icon path
ASSETS.ICON_LARGE        // Large icon for hero

// App branding
APP_NAME                 // "Personal Skill Map"

// Header behavior
HEADER_SCROLL_THRESHOLD  // Pixels before header style changes
NAV_LINKS                // Navigation links array for header

// Background animation
BACKGROUND_CONFIG.GRID_CELL_SIZE
BACKGROUND_CONFIG.NODE_SKIP_RATE
BACKGROUND_CONFIG.COLORS
BACKGROUND_CONFIG.MOUSE_INTERACTION_RADIUS
// ... and more

// Hero animation
HERO_ICON_ROTATION_DURATION  // Seconds per rotation

// SEO
SITE_URL                     // Base site URL
APP_DESCRIPTION              // Meta description
```

## API Routes

### POST `/api/ai/analyze`
Analyze a user query to determine if it's a specific career or needs suggestions.
- Specific career → returns `{ type: "specific", career: CareerSuggestion }`
- Vague/lifestyle query → returns `{ type: "suggestions", suggestions: CareerSuggestion[] }`

### POST `/api/ai/generate`
Generate a new skill map for a career.

### GET `/api/career/[careerId]?locale=en`
Fetch an existing career by its canonical key or UUID.

### GET `/api/career/search?q=engineer`
Search for careers matching a query.

### User Maps API
- `GET /api/map/[mapId]` - Fetch map by UUID or share slug
- `PATCH /api/map/[mapId]` - Update map settings
- `DELETE /api/map/[mapId]` - Delete a user's map
- `POST /api/map/fork` - Create map from base career
- `POST /api/map/[mapId]/copy` - Copy public map to your account

## Deployment

This app is optimized for Vercel deployment:

1. Push to GitHub
2. Connect to Vercel
3. Add environment variables in Vercel dashboard
4. Deploy

## License

MIT
